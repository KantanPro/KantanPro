# 一括請求書消費税対応テストチェックリスト

## 第4段階：包括的テスト

### 1. 基本機能テスト

#### 1.1 税率表示テスト
- [ ] 8%税率の商品が「8%」で表示される
- [ ] 10%税率の商品が「10%」で表示される
- [ ] 税率が設定されていない商品が「-」で表示される
- [ ] 税率カラムのヘッダーが正しく表示される

#### 1.2 消費税計算テスト
- [ ] 8%税率の商品の消費税が正しく計算される
- [ ] 10%税率の商品の消費税が正しく計算される
- [ ] 税込表示の場合の内税計算が正しい
- [ ] 税抜表示の場合の消費税加算が正しい

#### 1.3 合計表示テスト
- [ ] 案件ごとの小計が正しく表示される
- [ ] 月別グループの合計が正しく表示される
- [ ] 全体合計が正しく表示される
- [ ] 消費税の内訳が正しく表示される

### 2. 税区分対応テスト

#### 2.1 税込表示テスト
- [ ] 税込表示の顧客で正しく表示される
- [ ] 内税が正しく計算・表示される
- [ ] 税込小計が正しく表示される

#### 2.2 税抜表示テスト
- [ ] 税抜表示の顧客で正しく表示される
- [ ] 税抜合計が正しく表示される
- [ ] 消費税が正しく表示される
- [ ] 税込合計が正しく表示される

### 3. データ整合性テスト

#### 3.1 個別請求書との整合性
- [ ] 個別請求書と同じ税率が表示される
- [ ] 個別請求書と同じ消費税計算結果
- [ ] 個別請求書と同じ合計金額

#### 3.2 データベース整合性
- [ ] 税率データが正しく取得される
- [ ] 税区分データが正しく取得される
- [ ] 請求項目データが正しく取得される

### 4. エラーハンドリングテスト

#### 4.1 異常データ対応
- [ ] 税率がNULLの場合の処理
- [ ] 税率が0の場合の処理
- [ ] 税率が無効な値の場合の処理

#### 4.2 表示エラー対応
- [ ] 請求項目がない場合の表示
- [ ] 顧客データがない場合の表示
- [ ] 完了案件がない場合の表示

### 5. 印刷・PDFテスト

#### 5.1 印刷表示テスト
- [ ] 税率が印刷に正しく表示される
- [ ] 消費税計算が印刷に正しく表示される
- [ ] 合計金額が印刷に正しく表示される

#### 5.2 PDF保存テスト
- [ ] PDFに税率が正しく表示される
- [ ] PDFに消費税計算が正しく表示される
- [ ] PDFに合計金額が正しく表示される

### 6. パフォーマンステスト

#### 6.1 大量データ対応
- [ ] 大量の請求項目がある場合の表示速度
- [ ] 大量の案件がある場合の表示速度
- [ ] 大量の顧客がある場合の表示速度

#### 6.2 メモリ使用量
- [ ] メモリリークがない
- [ ] 適切なメモリ使用量

### 7. ブラウザ互換性テスト

#### 7.1 主要ブラウザ
- [ ] Chrome での動作確認
- [ ] Firefox での動作確認
- [ ] Safari での動作確認
- [ ] Edge での動作確認

#### 7.2 レスポンシブ対応
- [ ] モバイル表示での確認
- [ ] タブレット表示での確認
- [ ] デスクトップ表示での確認

### 8. セキュリティテスト

#### 8.1 入力値検証
- [ ] XSS攻撃対策
- [ ] SQLインジェクション対策
- [ ] CSRF対策

#### 8.2 権限確認
- [ ] 適切な権限チェック
- [ ] 非認証ユーザーのアクセス制限

### 9. 回帰テスト

#### 9.1 既存機能確認
- [ ] 既存の請求書発行機能が正常動作
- [ ] 既存の印刷機能が正常動作
- [ ] 既存のPDF保存機能が正常動作

#### 9.2 データ整合性確認
- [ ] 既存データの整合性
- [ ] 新規データの整合性

### 10. 最終確認

#### 10.1 総合テスト
- [ ] 全機能の統合テスト
- [ ] エンドツーエンドテスト
- [ ] ユーザーシナリオテスト

#### 10.2 ドキュメント確認
- [ ] 実装ドキュメントの更新
- [ ] ユーザーマニュアルの更新
- [ ] 技術仕様書の更新

## テスト結果

### 合格基準
- [ ] 全テスト項目が合格
- [ ] 重大なバグがない
- [ ] パフォーマンス要件を満たす
- [ ] セキュリティ要件を満たす

### 問題点
- [ ] 発見された問題点の記録
- [ ] 修正が必要な項目の特定
- [ ] 優先度の設定

### 次のステップ
- [ ] 問題点の修正
- [ ] 再テストの実施
- [ ] 本番環境への展開準備 
# KantanPro (KTPWP)

WordPress上で受注・顧客・サービス・仕入先・レポート・スタッフチャットまで一元管理できる総合ビジネス管理プラグイン

---

## 主な機能

- 7つの管理タブ（仕事リスト・伝票処理・得意先・サービス・協力会社・レポート・設定）
- 受注案件の進捗管理（6段階）
- 受注書の作成・編集・印刷・プレビュー
- 顧客・サービス・仕入先のマスター管理
- スタッフ間チャット（自動スクロール・削除連動）
- 売上・進捗・顧客別レポート
- 印刷・宛名テンプレート
- 直感的なタブUI・ページネーション・ソート・検索
- レスポンシブデザイン

---

## 直近の実装・改善点

- スタッフチャット自動スクロール・キーボードショートカット
- オーダー削除時のチャットデータ自動削除
- オーダー削除後の自動作成防止
- セキュリティ強化（CSRF, SQLi, XSS, 権限制御）

---

## セキュリティ対策

- SQLインジェクション防止
- XSS・CSRF対策
- ファイルアップロード検証
- 権限管理・安全なDBアクセス

---

## インストール

1. プラグインを `/wp-content/plugins/` にアップロード、または管理画面からインストール
2. プラグインを有効化
3. 固定ページに `[ktpwp_all_tab]` を挿入

---

## 基本的な使い方

1. **ショートコードの設置**  
   固定ページに `[ktpwp_all_tab]` を挿入すると、7つのタブが表示されます。
2. **顧客情報の登録**  
   「得意先」タブから顧客情報を登録してください。
3. **サービスの登録**  
   「サービス」タブから提供するサービス・商品を登録してください。
4. **受注書の作成**  
   「伝票処理」タブから新規受注書を作成し、顧客とサービスを選択してください。
5. **進捗管理**  
   「仕事リスト」タブで案件の進捗を管理してください。

### 進捗ステータス

1. 受付中
2. 見積中
3. 作成中
4. 完成未請求
5. 請求済
6. 入金済

---

## 印刷機能

- **受注書印刷**: 「伝票処理」タブでプレビュー・印刷が可能
- **宛名印刷**: 「設定」タブでテンプレートを設定し、顧客情報を自動置換

---

## データの管理

- ソート機能: 各リストはID、名前、日付、カテゴリー等でソート可能
- 検索機能: 各タブで条件検索が可能
- ページネーション: 大量データも快適に閲覧
- 削除管理: 対象外設定で論理削除による安全な管理

---

## よくある質問

- **Q: スタッフチャットは自動で最新にスクロールされますか？**  
  A: はい。メッセージ送信時に自動スクロールします。
- **Q: オーダー削除時に関連チャットも消えますか？**  
  A: はい。関連データは自動削除されます。
- **Q: セキュリティ対策は？**  
  A: SQLi, XSS, CSRF, 権限管理などを実装済みです。
- **Q: モバイル対応？**  
  A: レスポンシブデザインでスマホ・タブレットでも利用可能です。
- **Q: データのバックアップは必要ですか？**  
  A: 重要なビジネスデータを扱うため、定期的なWordPressデータベースのバックアップを推奨します。
- **Q: 受注書のレイアウトはカスタマイズできますか？**  
  A: 設定タブでテンプレートの編集が可能です。HTML/CSSの知識があればより詳細なカスタマイズができます。

---

## スクリーンショット

1. メインタブ画面
2. 仕事リスト
3. 伝票処理
4. 得意先管理
5. サービス管理
6. 協力会社管理
7. レポート画面
8. 設定画面

---

## サポート

公式サイト: https://www.kantanpro.com/

---

## システム要件

- WordPress 5.0 以上
- PHP 7.4 以上
- MySQL 5.6+ または MariaDB 10.0+
- メモリ推奨: 256MB 以上

---

## 変更履歴

### 1.0.8 (beta)
- スタッフチャット自動スクロール・削除連動
- オーダー削除後の自動作成防止
- セキュリティ強化

### 1.0.7 (beta)
- UI/UX改善

### 1.0.0
- 初期リリース

---

この内容で `README.md` を上書きします。

1. **ショートコードの設置**
   固定ページに `[ktpwp_all_tab]` を挿入すると、7つのタブが表示されます。

2. **顧客情報の登録**
   「得意先」タブから顧客情報を登録してください。

3. **サービスの登録**
   「サービス」タブから提供するサービス・商品を登録してください。

4. **受注書の作成**
   「伝票処理」タブから新規受注書を作成し、顧客とサービスを選択してください。

5. **進捗管理**
   「仕事リスト」タブで案件の進捗を管理してください。

### 進捗ステータス

1. **受付中** - 新規受注、内容確認中
2. **見積中** - 見積作成・提案中
3. **作成中** - 作業実行中
4. **完成未請求** - 作業完了、請求書未発行
5. **請求済** - 請求書発行済み
6. **入金済** - 支払い完了

## よくある質問

- **Q: このプラグインは安全ですか？**
  A: はい。SQLインジェクション防止、XSS保護、CSRF対策、ファイルアップロード検証など、包括的なセキュリティ対策が実装されています。
- **Q: 既存のWordPressテーマに影響しますか？**
  A: いいえ。プラグイン専用のクラス名とCSSを使用しており、テーマとの競合を避ける設計になっています。
- **Q: データのバックアップは必要ですか？**
  A: はい。重要なビジネスデータを扱うため、定期的なWordPressデータベースのバックアップを推奨します。
- **Q: モバイルデバイスで使用できますか？**
  A: はい。レスポンシブデザインに対応しており、スマートフォンやタブレットでも使用できます。
- **Q: 複数のユーザーで使用できますか？**
  A: はい。WordPressのユーザー権限機能を活用し、適切な権限を持つユーザーのみがアクセスできます。
- **Q: データのエクスポートは可能ですか？**
  A: レポート機能で集計データの出力が可能です。詳細なエクスポート機能は今後のアップデートで提供予定です。
- **Q: 受注書のレイアウトはカスタマイズできますか？**
  A: はい。設定タブでテンプレートの編集が可能です。HTML/CSSの知識があればより詳細なカスタマイズができます。
- **Q: 税込み・税抜きの計算はどうなりますか？**
  A: 仕入先には税区分の設定があり、適切な税計算が行われます。詳細は設定画面で確認してください。

## サポート

プラグインに関するお問い合わせやサポートは、以下までご連絡ください：

* **公式サイト**: https://www.kantanpro.com/

## システム要件

* WordPress 5.0 以上
* PHP 7.4 以上
* MySQL 5.6 以上 または MariaDB 10.0 以上
* 推奨メモリ: 256MB 以上

## 変更履歴

### 1.0.7 (beta)
* ベータ版リリース
* UI/UXを改善しました。

### 1.0.0
* ベータ版リリース
* プラグインリファレンス機能の実装
* リファレンスモーダルとAJAXコンテンツ読み込み機能
* 包括的なセキュリティ対策の実装
* 7つの主要機能タブの完全実装
* 受注管理、顧客管理、サービス管理、仕入先管理機能
* 印刷・プレビュー機能の最適化
* レポート・分析機能の強化
* レスポンシブデザイン対応の完成

## アップグレード通知

### 1.0.7 (beta)
* ベータ版リリース
* UI/UXを改善しました。

### 1.0.0
* ベータ版リリース
* プラグインリファレンス機能が追加されました
* セキュリティとパフォーマンスが大幅に向上
* 全機能が本番環境で安定稼働
* 新機能のヘルプ・リファレンスモーダルを活用してください

---

このREADMEは自動移動・構成変更の目印です。

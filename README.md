# KantanPro (KTPWP)

WordPressで動作する業務管理・受注進捗・請求・顧客・サービス・協力会社・レポート・スタッフチャットまで一元管理できる多機能プラグイン。

---

## 説明
KantanProは、WordPress上で以下の業務を一元管理できる多機能プラグインです。
- モバイル(iOS/Android)実機でも崩れない直感的UI（gap→margin対応）
- 受注書・請求書のPDF出力
- サービス選択ポップアップ（伝票編集時）
- スタッフチャット（自動スクロール・削除連動）
- ログインユーザーアバター・スタッフ表示
- ヘルプ（リファレンス）ボタン
- 強固なセキュリティ（XSS/CSRF/SQLi/権限管理/ファイル検証/ノンス/prepare文）
- ページネーション・検索・ソート・進捗/納期管理・警告マーク

---

## 主な機能
- 6つの管理タブ（仕事リスト・伝票処理・得意先・サービス・協力会社・レポート）
- 受注案件の進捗管理（7段階）
- 受注書・請求書の作成・編集・PDF保存
- 顧客・サービス・協力会社のマスター管理
- スタッフチャット（自動スクロール・削除連動）
- 商品・サービスの詳細管理
- モバイルUI・アバター表示
- ヘルプ（リファレンス）機能
- データ検索・ソート・ページネーション
- 進捗・納期管理・警告マーク
- 権限管理・安全なDBアクセス

---

## セキュリティ対策
- SQLインジェクション防止（prepare文・バインド変数）
- XSS・CSRF対策（サニタイズ・エスケープ・ノンス）
- ファイルアップロード検証
- 権限管理・安全なDBアクセス
- ノンス・トークンによるフォーム保護
- gap→margin対応によるUI崩れ防止（iOS/Android実機）

---

## インストール
1. プラグインを `/wp-content/plugins/` にアップロード、または管理画面からインストール
2. プラグインを有効化
3. 固定ページに `[ktpwp_all_tab]` を挿入
4. 管理画面「KantanPro」から基本設定を行ってください

---

## システム要件
- WordPress 5.0 以上
- PHP 7.4 以上
- MySQL 5.6 以上 または MariaDB 10.0 以上
- 推奨メモリ: 256MB 以上

---

## 基本的な使い方
1. 固定ページに `[ktpwp_all_tab]` を挿入すると、6つのタブが表示されます
2. 各タブで顧客・サービス・協力会社・受注書・レポート等を管理
3. 伝票編集時は「サービス選択」ポップアップから商品を追加
4. 受注書・請求書はPDFで出力可能
5. モバイルでも快適に操作可能

---

## 変更履歴
### 1.2.6(beta)
- PDF出力機能のさらなる強化
- UI/UXの細部改善（gap→margin対応、アバター表示強化）
- スタッフチャット機能の安定性向上
- サービス選択ポップアップの利便性向上
- セキュリティ強化（XSS/CSRF/SQLi/権限管理/ファイル検証/ノンス/prepare文）
- その他細かなバグ修正

### 1.2.5(beta)
- PDF出力機能の強化
- UI/UXの改善（gap→margin対応、アバター表示強化）
- スタッフチャット機能の安定化
- サービス選択ポップアップの改善
- セキュリティ強化
- その他バグ修正

### 1.2.2(beta)
- 個別請求書・一括請求書のPDF保存
- 納期・未請求警告マーク
- モバイルUI・アバター・ヘルプボタン強化
- サービス選択ポップアップの自動クローズ制御
- gap→margin対応でiOS実機互換性向上

### 1.2.1(beta)
- モバイル表示の改善
- 進捗状況にボツ追加
- 納期管理機能追加

### 1.2.0(beta)
- 伝票処理タブの最終実装
- サービス・協力会社選択ポップアップ強化
- 行要素数値の最適化

---

## ライセンス
GPL v2 or later  
License URI: https://www.gnu.org/licenses/gpl-2.0.html

---

## サポート
プラグインに関するお問い合わせやサポートは、以下までご連絡ください：

**公式サイト**: https://www.kantanpro.com/
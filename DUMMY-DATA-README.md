# 強化版ダミーデータツール

KantanPro WordPressプラグイン用の強化版ダミーデータ作成・クリアツールです。

## 概要

このツールは、KantanProプラグインのテスト用に以下のデータを自動生成します：

- **顧客×6件** - 各社のメールアドレスは全て `info@kantanpro.com`
- **協力会社×6件** - 各社のメールアドレスは全て `info@kantanpro.com`
- **サービス×6件** - 一般（税率10%）×2、食品（税率8%）×2、不動産（非課税）×2
- **受注書×18件** - 顧客×6件 × 進捗3ステータス（受付中・受注・完成）
- **職能×18件** - 協力会社×6件 × 税率3パターン（税率10%・税率8%・非課税）
- **請求項目とコスト項目** - 各受注書に自動追加

## 作成されるデータの詳細

### 顧客データ
1. 株式会社サンプル商事
2. 有限会社テックソリューション
3. 合同会社デザイン工房
4. 株式会社マーケティングプロ
5. 有限会社建設工業
6. 株式会社フードサービス

### 協力会社データ
1. 株式会社フリーランスネット
2. 有限会社デジタルクリエイター
3. 合同会社システム開発
4. 株式会社ウェブデザイン
5. 有限会社コンサルティング
6. 株式会社ロジスティクス

### サービスデータ
- **一般（税率10%）**
  - ウェブサイト制作（¥500,000）
  - システム開発（¥800,000）
- **食品（税率8%）**
  - ケータリングサービス（¥150,000）
  - 食材配送（¥50,000）
- **不動産（非課税）**
  - 不動産仲介（¥300,000）
  - 物件管理（¥100,000/月）

### 受注書データ
- 各顧客に対して3件の受注書を作成
- 進捗ステータス：受付中・受注・完成
- 作成日は過去365日以内のランダムな日付
- 完成済みの受注書には完了日を設定

### 職能データ
- 各協力会社に対して3つの職能を作成
- 税率パターン：10%、8%、非課税
- 職能例：プログラミング、デザイン、ライティング、マーケティング、コンサルティング、データ分析、翻訳、動画編集、写真撮影、SEO対策、SNS運用、動画制作

## 使用方法

### シェルスクリプトを使用（推奨）

```bash
# ダミーデータを作成
./run-dummy-data.sh create

# ダミーデータをクリア
./run-dummy-data.sh clear

# ヘルプを表示
./run-dummy-data.sh help
```

### PHPスクリプトを直接実行

```bash
# WordPressディレクトリに移動
cd wordpress

# ダミーデータを作成
php ../create_dummy_data.php

# ダミーデータをクリア
php ../create_dummy_data.php clear
```

### WP-CLIを使用

```bash
# WP-CLIコマンドでダミーデータを作成
wp eval-file wp-cli-create-dummy-data.php -- ktp create-dummy-data --force
```

## ファイル構成

- `create_dummy_data.php` - メインのダミーデータ作成スクリプト
- `run-dummy-data.sh` - 実行用シェルスクリプト
- `wp-cli-create-dummy-data.php` - WP-CLI用コマンドファイル

## 機能

### データ作成機能
- 顧客、協力会社、サービス、受注書、職能の一括作成
- 各受注書に請求項目とコスト項目を自動追加
- リアルな日付と進捗状況の設定
- 税率の適切な設定（10%、8%、非課税）

### データクリア機能
- 関連テーブルの一括クリア
- 外部キー制約の適切な処理
- 安全な削除処理

### エラーハンドリング
- テーブル存在チェック
- データベース接続エラーの処理
- 詳細なログ出力

## 注意事項

1. **本番環境での使用禁止** - このツールは開発・テスト環境でのみ使用してください
2. **データバックアップ** - 実行前にデータベースのバックアップを取得してください
3. **WordPress環境** - WordPressが正常に動作している環境で実行してください
4. **権限確認** - データベースへの書き込み権限があることを確認してください

## トラブルシューティング

### よくある問題

1. **WordPressディレクトリが見つからない**
   - スクリプトをKantanProプラグインディレクトリで実行してください

2. **データベース接続エラー**
   - `wp-config.php`の設定を確認してください
   - データベースサーバーが起動していることを確認してください

3. **権限エラー**
   - データベースユーザーに適切な権限があることを確認してください

4. **テーブルが存在しない**
   - KantanProプラグインが正常にインストールされていることを確認してください
   - プラグインのアクティベーションを実行してください

## 更新履歴

- **v2.0** - 強化版リリース
  - 受注書に請求項目とコスト項目を自動追加
  - データクリア機能を追加
  - 進捗ステータスを3つに絞り込み
  - より詳細なログ出力

- **v1.0** - 初回リリース
  - 基本的なダミーデータ作成機能 